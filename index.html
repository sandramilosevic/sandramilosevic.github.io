<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sandra Milošević</title>
  <link rel="stylesheet" href="style.20251013.css" />
</head>

<body>
  <nav>
    <h1>Sandra Milošević</h1>
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul id="nav-links">
      <li>
        <a href="index.html">
          <div class="flip-wrapper">
            <div class="front">Home</div>
            <div class="back">Home</div>
          </div>
        </a>
      </li>
      <li>
        <a href="about.html">
          <div class="flip-wrapper">
            <div class="front">About</div>
            <div class="back">About</div>
          </div>
        </a>
      </li>
      <li>
        <a href="contact.html">
          <div class="flip-wrapper">
            <div class="front">Contact</div>
            <div class="back">Contact</div>
          </div>
        </a>
      </li>
    </ul>
  </nav>

  <main>
    <section class="gallery" id="gallery">
      <div class="gallery-item" data-link="Kinevia.html">
        <div class="image-container" aria-hidden="false">
          <img src="slikeMockup/Kinevia_01-1.png" alt="">
          <div class="xray-hover">View</div>
        </div>
        <p class="caption">Kinevia, Branding</p>
      </div>

      <div class="gallery-item" data-link="PromoVideo.html">
        <div class="image-container" aria-hidden="false">
          <video src="slikeMockup/ordVideo.mp4" muted loop playsinline preload="metadata"></video>
          <div class="xray-hover">View</div>
        </div>
        <p class="caption">Skincare Promo Video, Internship Project</p>
      </div>

      <div class="gallery-item" data-link="Movix.html">
        <div class="image-container" aria-hidden="false">
          <video src="slikeMockup/movix.mp4" muted loop playsinline preload="metadata"></video>
          <div class="xray-hover">View</div>
        </div>
        <p class="caption">Movix, UI/UX Design</p>
      </div>

      <div class="gallery-item" data-link="Moe.html">
        <div class="image-container" aria-hidden="false">
          <img src="slikeMockup/MoeThumbnail.png" alt="">
          <div class="xray-hover">View</div>
        </div>
        <p class="caption">Moe, Branding</p>
      </div>

      <div class="gallery-item" data-link="domestique.html">
        <div class="image-container" aria-hidden="false">
          <video src="slikeMockup/video.mp4" muted loop playsinline preload="metadata"></video>
          <div class="xray-hover">View</div>
        </div>
        <p class="caption">Domestique, Web Design</p>
      </div>

      <div class="gallery-item" data-link="Axon.html">
        <div class="image-container" aria-hidden="false">
          <video src="slikeMockup/axon.mp4" muted loop playsinline preload="metadata"></video>
          <div class="xray-hover">View</div>
        </div>
        <p class="caption">Axon, UI/UX Design</p>
      </div>

      <div class="gallery-item" data-link="Brew.html">
        <div class="image-container" aria-hidden="false">
          <img src="slikeMockup/brewSlika.png" alt="">
          <div class="xray-hover">View</div>
        </div>
        <p class="caption">Brew, Branding</p>
      </div>
    </section>


  </main>
  <hr class="solid" />
  <footer>
    <div class="left-links">
      <ul>
        <li><a href="https://www.linkedin.com/in/sandramilosevicc" target="_blank"
            rel="noopener noreferrer">LinkedIn</a></li>
        <li><a href="https://www.instagram.com/sacadesign/" target="_blank" rel="noopener noreferrer">Instagram</a></li>
        <li><a href="https://mail.google.com/mail/?view=cm&fs=1&to=smilosevic892@gmail.com" target="_blank"
            rel="noopener noreferrer">Email</a></li>
      </ul>
    </div>
    <div class="right-text">Made in Serbia</div>
  </footer>

  <script>
    (function () {
      const gallery = document.getElementById('gallery');
      if (!gallery) return;

      const DEFAULT_LEFT_OFFSET = 80;
      let isWheelAnimating = false;
      let wheelTimer = null;

      function withAutoScrollBehavior(fn) {
        const prev = gallery.style.scrollBehavior;
        gallery.style.scrollBehavior = 'auto';
        fn();
        requestAnimationFrame(() => {
          gallery.style.scrollBehavior = prev || 'smooth';
        });
      }

      function isDesktop() {
        return window.innerWidth > 768;
      }

      function initWheelScroll() {
        gallery.addEventListener('wheel', (e) => {
          if (!isDesktop()) return;

          e.preventDefault();
          const delta = e.deltaY;
          if (Math.abs(delta) < 8) return;

          const item = gallery.querySelector('.gallery-item');
          const style = getComputedStyle(gallery);
          const gap = parseInt(style.gap || 16, 10) || 16;
          const itemW = (item ? item.getBoundingClientRect().width : 300) + gap;
          const direction = Math.sign(delta);

          if (!gallery.classList.contains('no-initial-offset')) {
            if (isWheelAnimating) return;
            isWheelAnimating = true;
            clearTimeout(wheelTimer);

            const target = Math.max(0, gallery.scrollLeft + direction * itemW);
            gallery.scrollTo({ left: target, behavior: 'smooth' });

            wheelTimer = setTimeout(() => {
              if (gallery.scrollLeft > 10) {
                withAutoScrollBehavior(() => {
                  gallery.scrollLeft = Math.max(0, gallery.scrollLeft + DEFAULT_LEFT_OFFSET);
                });
                gallery.classList.add('no-initial-offset');
              }
              isWheelAnimating = false;
            }, 420);
            return;
          }

          if (isWheelAnimating) return;
          isWheelAnimating = true;
          const target = Math.max(0, gallery.scrollLeft + direction * itemW);
          gallery.scrollTo({ left: target, behavior: 'smooth' });

          wheelTimer = setTimeout(() => {
            isWheelAnimating = false;
          }, 380);
        }, { passive: false });
      }

      function initOffsetToggle() {
        function updateOffsetOnReturn() {
          if (!isDesktop()) return;
          if ((gallery.scrollLeft || 0) <= 10 && gallery.classList.contains('no-initial-offset')) {
            withAutoScrollBehavior(() => {
              gallery.scrollLeft = Math.max(0, gallery.scrollLeft - DEFAULT_LEFT_OFFSET);
            });
            gallery.classList.remove('no-initial-offset');
          }
        }

        gallery.addEventListener('scroll', updateOffsetOnReturn, { passive: true });
        window.addEventListener('resize', updateOffsetOnReturn);
      }

      function initClickableItems() {
        document.querySelectorAll('.gallery-item').forEach(item => {
          const link = item.dataset.link;
          const container = item.querySelector('.image-container');
          if (!container) return;

          container.setAttribute('tabindex', '0');
          container.setAttribute('role', 'link');
          container.style.cursor = 'pointer';

          container.addEventListener('click', (e) => {
            if (!link) return;
            if (e.ctrlKey || e.metaKey) window.open(link, '_blank');
            else window.location.href = link;
          });

          container.addEventListener('keydown', (e) => {
            if ((e.key === 'Enter' || e.key === ' ') && link) {
              e.preventDefault();
              window.location.href = link;
            }
          });
        });
      }

      function initVideoHover() {
        const videos = document.querySelectorAll('.image-container video');
        videos.forEach(video => {
          const parent = video.parentElement;
          parent.addEventListener('mouseenter', () => { video.play().catch(() => { }); });
          parent.addEventListener('mouseleave', () => { video.pause(); });
        });
      }

      function initXrayFollow() {
        const items = document.querySelectorAll('.gallery-item');
        items.forEach(item => {
          const hover = item.querySelector('.xray-hover');
          const container = item.querySelector('.image-container');
          if (!hover || !container) return;

          container.addEventListener('mousemove', (e) => {
            const rect = container.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            hover.style.left = x + 'px';
            hover.style.top = y + 'px';
            hover.style.opacity = '1'; // pokaži kada miš prati
          });

          container.addEventListener('mouseleave', () => {
            //  hover.style.left = '50%';
            //  hover.style.top = '50%';
            hover.style.opacity = '0'; // sakrij kada miš napusti
          });
        });
      }

      function initAll() {
        initWheelScroll();
        initOffsetToggle();
        initClickableItems();
        initVideoHover();
        initXrayFollow();
      }

      document.addEventListener('DOMContentLoaded', initAll);
    })();

    document.addEventListener('DOMContentLoaded', () => {
      const hamburger = document.querySelector('.hamburger');
      const navMenu = document.querySelector('nav ul');

      if (hamburger && navMenu) {
        hamburger.addEventListener('click', () => {
          navMenu.classList.toggle('show');
        });
      }
    });
  </script>

</body>

</html>